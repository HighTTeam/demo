<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="hight.sa.repository.PermissionRepo">
    <!--auto generated Code-->
    <resultMap id="AllColumnMap" type="hight.sa.model.Permission">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="desc" property="desc"/>
        <result column="url" property="url"/>
    </resultMap>

    <!--auto generated Code-->
    <sql id="all_column">
        `id`,
        `name`,
        `desc`,
        `url`
    </sql>
    <select id="getPermissionByUserName" resultType="hight.sa.model.Permission">
        select p.* from user u
        left join user_role ru on ru.user_id = u.id
        LEFT JOIN role_permission rp on ru.role_id = rp.role_id
        left join permission p on p.id = rp.permission_id
        where u.user_name = #{userName}
    </select>
    <select id="getAllPermission" resultType="hight.sa.model.Permission">
        select * from permission
    </select>
</mapper>

